<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Cox Lab">
<meta name="dcterms.date" content="2025-10-10">

<title>Matching rows by name</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./Figures/coxlab_logo2.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">HOME</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./maxquant_instructions.html" rel="" target="">
 <span class="menu-text">MaxQuant</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./perseus_instructions.html" rel="" target="">
 <span class="menu-text">Perseus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./andromeda_instructions.html" rel="" target="">
 <span class="menu-text">Andromeda</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="./contact.html" rel="" target=""><i class="bi bi-envelope" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/cox-labs/CoxLab_Bug_Reporting" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/TheCoxLab" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/juergen-cox-2437ba17/" rel="" target=""><i class="bi bi-fa-linkedin fa-lg" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="-1">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#general" id="toc-general" class="nav-link active" data-scroll-target="#general"><span class="header-section-number">1</span> General</a></li>
  <li><a href="#brief-description" id="toc-brief-description" class="nav-link" data-scroll-target="#brief-description"><span class="header-section-number">2</span> Brief description</a></li>
  <li><a href="#parameters" id="toc-parameters" class="nav-link" data-scroll-target="#parameters"><span class="header-section-number">3</span> Parameters</a>
  <ul>
  <li><a href="#base-matrix" id="toc-base-matrix" class="nav-link" data-scroll-target="#base-matrix"><span class="header-section-number">3.1</span> Base matrix</a></li>
  <li><a href="#other-matrix" id="toc-other-matrix" class="nav-link" data-scroll-target="#other-matrix"><span class="header-section-number">3.2</span> Other matrix</a></li>
  <li><a href="#matching-column-1" id="toc-matching-column-1" class="nav-link" data-scroll-target="#matching-column-1"><span class="header-section-number">3.3</span> Matching column 1</a></li>
  <li><a href="#matching-column-2" id="toc-matching-column-2" class="nav-link" data-scroll-target="#matching-column-2"><span class="header-section-number">3.4</span> Matching column 2</a></li>
  <li><a href="#indicator" id="toc-indicator" class="nav-link" data-scroll-target="#indicator"><span class="header-section-number">3.5</span> Indicator</a></li>
  <li><a href="#expression-columns" id="toc-expression-columns" class="nav-link" data-scroll-target="#expression-columns"><span class="header-section-number">3.6</span> Expression columns</a></li>
  <li><a href="#combine-expression-column-values" id="toc-combine-expression-column-values" class="nav-link" data-scroll-target="#combine-expression-column-values"><span class="header-section-number">3.7</span> Combine expression column values</a></li>
  <li><a href="#categorical-columns" id="toc-categorical-columns" class="nav-link" data-scroll-target="#categorical-columns"><span class="header-section-number">3.8</span> Categorical columns</a></li>
  <li><a href="#text-columns" id="toc-text-columns" class="nav-link" data-scroll-target="#text-columns"><span class="header-section-number">3.9</span> Text columns</a></li>
  <li><a href="#numerical-columns" id="toc-numerical-columns" class="nav-link" data-scroll-target="#numerical-columns"><span class="header-section-number">3.10</span> Numerical columns</a></li>
  <li><a href="#combine-numerical-values" id="toc-combine-numerical-values" class="nav-link" data-scroll-target="#combine-numerical-values"><span class="header-section-number">3.11</span> Combine numerical values</a></li>
  </ul></li>
  <li><a href="#parameter-window" id="toc-parameter-window" class="nav-link" data-scroll-target="#parameter-window"><span class="header-section-number">4</span> Parameter window</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Matching rows by name</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Cox Lab </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 10, 2025</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="general" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> General</h1>
<ul>
<li><strong>Type:</strong> - Matrix MultiProcessing</li>
<li><strong>Heading:</strong> - Basic (MultiProcessing)</li>
<li><strong>Source code:</strong> <a href="https://github.com/JurgenCox/perseus-plugins/blob/master/PerseusPluginLib/Join/MatchingRowsByName.cs">MatchingRowsByName.cs</a></li>
</ul>
</section>
<section id="brief-description" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Brief description</h1>
<p>The base matrix is copied. Rows of the second matrix are associated with rows of the base matrix via matching expressions in a textual column from each matrix. Selected columns of the second matrix are attached to the first matrix. If exactly one row of the second matrix corresponds to a row of the base matrix, values are just copied. If more than one row of the second matrix matches to a row of the first matrix, the corresponding values are averaged (actually the median is taken) for numerical and expression columns and concatenated for textual and categorical columns.</p>
<!-- This comment and the line above it must be preserved when editing this file!
The recommended sections are these, but they may be changed on a case by case basis.
===== Detailed description =====
===== Parameters =====
===== Theoretical background =====
===== Examples =====
Make changes only below this line! -->
</section>
<section id="parameters" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Parameters</h1>
<section id="base-matrix" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="base-matrix"><span class="header-section-number">3.1</span> Base matrix</h2>
<p>Specifies the matrix, whose rows are used as basis for the matching of the entries in a defined column. If no matrix is selected, the default value is empty, otherwise the default is the currently selected matrix. The selection can be changed by first clicking on “Base matrix” line of the pop-up window and then clicking on the matrix of choice in the middle pane (see parameter window A).</p>
</section>
<section id="other-matrix" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="other-matrix"><span class="header-section-number">3.2</span> Other matrix</h2>
<p>Specifies the matrix, whose rows are matched to the ones of the “Base matrix”. If no matrix is selected, the default value is empty, otherwise the default is the currently selected matrix. The selection can be changed by first clicking on “Other matrix” line of the pop-up window and then clicking on the matrix of choice in the middle pane (see parameter window A).</p>
</section>
<section id="matching-column-1" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="matching-column-1"><span class="header-section-number">3.3</span> Matching column 1</h2>
<p>Selected text column of the “Base matrix” that is used for matching (default: first text column in the matrix).</p>
</section>
<section id="matching-column-2" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="matching-column-2"><span class="header-section-number">3.4</span> Matching column 2</h2>
<p>Selected text column of the “Other matrix” that is used for matching (default: first text column in the matrix).</p>
</section>
<section id="indicator" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="indicator"><span class="header-section-number">3.5</span> Indicator</h2>
<p>If checked, a categorical column called as the “Other matrix” will be added (default: unchecked). A “+” in the column indicates that at least one row of the second matrix matches.</p>
</section>
<section id="expression-columns" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="expression-columns"><span class="header-section-number">3.6</span> Expression columns</h2>
<p>Selected expression columns of the “Other matrix” that should be added to the “Base matrix” (default: no expression columns are selected).</p>
</section>
<section id="combine-expression-column-values" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="combine-expression-column-values"><span class="header-section-number">3.7</span> Combine expression column values</h2>
<p>Defines the combination of multiple expression values, in case multiple rows of the “Other matrix” match to a row of the “Base matrix” (default: Median). The combination can be selected from a predefined list of operations:</p>
<ul>
<li>Median</li>
<li>Mean</li>
<li>Minimum</li>
<li>Maximum</li>
<li>Sum</li>
</ul>
</section>
<section id="categorical-columns" class="level2" data-number="3.8">
<h2 data-number="3.8" class="anchored" data-anchor-id="categorical-columns"><span class="header-section-number">3.8</span> Categorical columns</h2>
<p>Selected categorical columns of the “Other matrix” that should be added to the “Base matrix” (default: no categorical columns are selected).</p>
</section>
<section id="text-columns" class="level2" data-number="3.9">
<h2 data-number="3.9" class="anchored" data-anchor-id="text-columns"><span class="header-section-number">3.9</span> Text columns</h2>
<p>Selected text columns of the “Other matrix” that should be added to the “Base matrix” (default: no text columns are selected).</p>
</section>
<section id="numerical-columns" class="level2" data-number="3.10">
<h2 data-number="3.10" class="anchored" data-anchor-id="numerical-columns"><span class="header-section-number">3.10</span> Numerical columns</h2>
<p>Selected numerical columns of the “Other matrix” that should be added to the “Base matrix” (default: no numerical columns are selected).</p>
</section>
<section id="combine-numerical-values" class="level2" data-number="3.11">
<h2 data-number="3.11" class="anchored" data-anchor-id="combine-numerical-values"><span class="header-section-number">3.11</span> Combine numerical values</h2>
<p>Defines the combination of multiple numerical values, in case multiple rows of the “Other matrix” match to a row of the “Base matrix” (default: Median). The combination can be selected from a predefined list of operations:</p>
<ul>
<li>Median</li>
<li>Mean</li>
<li>Minimum</li>
<li>Maximum</li>
<li>Sum</li>
<li>Keep separate</li>
</ul>
</section>
</section>
<section id="parameter-window" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Parameter window</h1>
<p><img src="images/basic-matching_rows_by_name-edited.png" class="img-fluid"></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">© 2023, created by and maintained by Cox lab</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>